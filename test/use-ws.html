<html>
  <head>
    <meta charset="utf-8" />
    <script type="module">
let sock;
document.querySelector("#connect").addEventListener("click", ev => {
  const wsUrl = document.querySelector("#endpoint").value;
  sock = new WebSocket(wsUrl);
  sock.addEventListener("open", ev => {
    document.querySelector("#send").disabled = false;
  });
  sock.addEventListener("message", ev => {
    const pre = document.querySelector("pre");
    pre.textContent = `${ev.data}\n${pre.textContent}`;
  });
});
document.querySelector("#send").addEventListener("click", ev => {
  sock.send(document.querySelector("#message").value);
});
    </script>
  </head>
  <body>
    <h1>WebSocket: echo client</h1>
    <div>
      <label>ws url: <input id="endpoint"></label>
      <button id="connect">connect</button>
    </div>
    <input id="message" value="hello"><button id="send" disabled>send</button>
    <pre></pre>
  </body>
</html>
